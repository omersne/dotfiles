#!/bin/zsh

__git_prompt_color()
{
    if git status --porcelain 2>/dev/null | grep -q .; then
        echo "%F{9}"
    else
        # If `git status --porcelain' returned 0
        if [ "${pipestatus%% *}" = "0" ]; then
            echo "%F{226}"
        fi
    fi
}

precmd()
{
    PROMPT="%(!.%F{11}.%F{14})%n%F{63}@%m$(__git_prompt_color)->%f "
    RPROMPT=$'%F{2}[%~]%f %(?.%F{2}.%F{9})[%?]'
}

